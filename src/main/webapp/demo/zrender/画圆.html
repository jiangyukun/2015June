<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ZRender</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ZRender">
    <meta name="author" content="kener.linfeng@gmail.com">

    <script src="doc/asset/js/esl/esl.js"></script>

    <link href="doc/asset/css/zrenderHome.css" rel="stylesheet">
</head>

<body>
<div class="face" id='face' style="height:500px;"></div>
<!--<script src="doc/asset/js/jquery.js"></script>-->
<script>
    var zr;
    var animationTicket;

    require.config({
        packages: [
            {
                name: 'zrender',
                location: 'src',
                main: 'zrender'
            }
        ]
    });

    require(['zrender', 'zrender/shape/Line', 'zrender/shape/Circle'], function (zrender, LineShape, CircleShape) {
        var zr = zrender.init(document.getElementById('face'));
        var color = require('zrender/tool/color');
        var colorIdx = 0;
        var width = Math.ceil(zr.getWidth());
        var height = Math.ceil(zr.getHeight());
        var i, n = 10, A = 2 * Math.PI / n, r = 150;

        var lines = [], fCricles = [];
        var myCircle = new CircleShape({
            zlevel: 1,
            style: {
                x: width / 2,
                y: height / 2,
                r: 20,
                brushType: 'both',
                color: 'rgba(255, 69, 0, 1)',
                strokeColor: 'rgba(255, 255, 255, 1)',
                lineWidth: 8,
                shadowBlur: 10,
                shadowColor: 'rgba(255,215,0,0.8)',
                text: 'me',
                textPosition: 'inside',
                textAlign: 'center'
            },
            clickable: true
        });
        for (i = 0; i < n; i++) {
            lines[i] = new LineShape({
                rotation: [0, width / 2, height / 2],
                style: {
                    xStart: width / 2,
                    yStart: height / 2,
                    xEnd: width / 2 + r * Math.cos(A * i),
                    yEnd: height / 2 + r * Math.sin(A * i),
                    strokeColor: color.getColor(colorIdx++),
                    lineWidth: 2,
                    lineType: 'solid',
                    text: ''
                },
                hoverable: false
            });

            fCricles[i] = new CircleShape({
                zlevel: 1,
                rotation: [0, width / 2, height / 2],
                style: {
                    x: width / 2 + r * Math.cos(A * i),
                    y: height / 2 + r * Math.sin(A * i),
                    r: 20,
                    brushType: 'both',
                    color: 'rgba(255, 69, 0, 1)',
                    strokeColor: color.getColor(colorIdx++),
                    lineWidth: 8,
                    shadowBlur: 10,
                    shadowColor: 'rgba(255,215,0,0.8)',
                    text: i + 1,
                    textPosition: 'inside',
                    textAlign: 'center'
                },
                _c: 1,
                clickable: true,
                onclick: function () {
                    for (i = 0; i < n; i++) {
                        var c = fCricles[i];
                        zr.animate(fCricles[i].id)
                                .when(1000, {
                                    rotation: [A * c._c, width / 2, height / 2]
                                })
                                .start();
                        zr.animate(lines[i].id)
                                .when(1000, {
                                    rotation: [A * c._c, width / 2, height / 2]
                                })
                                .start();
                        c._c++;
                    }
                    zr.refresh();
                }
            });
        }
        zr.addShape(myCircle);
        for (i = 0; i < n; i++) {
            zr.addShape(lines[i]);
            zr.addShape(fCricles[i]);
        }
        zr.render();

    });
</script>
</body>
</html>
